
<!-- #-------------------------------------------------------------------------------------------------------
# Aplicación Web de las asignaturas Diseño de aplicaciones para internet y Infraestructura virtual
#
# Desarrolladores:
#	Óscar Sánchez Martínez
#	Julio Martínez Martínez-Checa
#	Hans Manuel Grenner Noguerón
#	Juan Francisco Rodríguez Vilchez
#	Jose Antonio Plata Muñoz
#	Miguel Martínez Castellanos
#	Cristina Rosillo Arenas
#
# Aplicación desarrollada para el Proyecto UGR Aerospace Program
#
# En este archivo se encuentra las diferentes clases que administran la aplicación.
# Aplicación desplegada en el Paas Google App Engine : http://ugraerospaceprogram.appspot.com/
# 
# Utilización de la tecnología de Google para el desarrollo de la Aplicación.
# IVAerospace Copyright (C) 2014 - ivaerospace2014@gmail.com This program is free software: you can 
# redistribute it and/or modify it under the terms of the GNU General Public License as published by
# the Free Software Foundation, either version 3 of the License, or (at your option) any later version.
# This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even 
# the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public 
# License for more details.
#
#-------------------------------------------------------------------------------------------------------

-->

<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="UGR AeroSPace">
    <meta name="author" content="iv-aerospace" />
    <!-- <link rel="icon" href="../../favicon.ico"> --> 

    <title>UGR Aerospace Program</title>

    <!-- Bootstrap core CSS -->
    <link href="http://getbootstrap.com/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <link href="static/css/main.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="http://getbootstrap.com/examples/justified-nav/justified-nav.css" rel="stylesheet">

    <!-- Just for debugging purposes. Don't actually copy these 2 lines! -->
    <!--[if lt IE 9]><script src="../../assets/js/ie8-responsive-file-warning.js"></script><![endif]-->
    <script src="http://getbootstrap.com/assets/js/ie-emulation-modes-warning.js"></script>

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

    <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
    <script src="http://code.highcharts.com/highcharts.js"></script>
	<script src="http://code.highcharts.com/modules/exporting.js"></script>
    <script>
/**
 * Dark theme for Highcharts JS
 * @author Torstein Honsi
 */

// Load the fonts
Highcharts.createElement('link', {
   href: 'http://fonts.googleapis.com/css?family=Unica+One',
   rel: 'stylesheet',
   type: 'text/css'
}, null, document.getElementsByTagName('head')[0]);

Highcharts.theme = {
   colors: ["#e50000", "#2b908f", "#90ee7e", "#f45b5b", "#7798BF", "#aaeeee", "#ff0066", "#eeaaee",
      "#55BF3B", "#DF5353", "#7798BF", "#aaeeee"],
   chart: {
      backgroundColor: {
         linearGradient: { x1: 0, y1: 0, x2: 1, y2: 1 },
         stops: [
            [0, '#2a2a2b'],
            [1, '#3e3e40']
         ]
      },
      style: {
         fontFamily: "'Unica One', sans-serif"
      },
      plotBorderColor: '#606063',
   },
   title: {
      style: {
         color: '#E0E0E3',
         textTransform: 'uppercase',
         fontSize: '20px'
      }
   },
   subtitle: {
      style: {
         color: '#E0E0E3',
         textTransform: 'uppercase'
      }
   },
   xAxis: {
      gridLineColor: '#707073',
      labels: {
         style: {
            color: '#E0E0E3'
         }
      },
      lineColor: '#707073',
      minorGridLineColor: '#505053',
      tickColor: '#707073',
      title: {
         style: {
            color: '#A0A0A3'

         }
      }
   },
   yAxis: {
      gridLineColor: '#707073',
      labels: {
         style: {
            color: '#E0E0E3'
         }
      },
      lineColor: '#707073',
      minorGridLineColor: '#505053',
      tickColor: '#707073',
      tickWidth: 1,
      title: {
         style: {
            color: '#A0A0A3'
         }
      }
   },
   tooltip: {
      backgroundColor: 'rgba(0, 0, 0, 0.85)',
      style: {
         color: '#F0F0F0'
      }
   },
   plotOptions: {
      series: {
         dataLabels: {
            color: '#B0B0B3'
         },
         marker: {
            lineColor: '#333'
         }
      },
      boxplot: {
         fillColor: '#505053'
      },
      candlestick: {
         lineColor: 'white'
      },
      errorbar: {
         color: 'white'
      }
   },
   legend: {
      itemStyle: {
         color: '#E0E0E3'
      },
      itemHoverStyle: {
         color: '#FFF'
      },
      itemHiddenStyle: {
         color: '#606063'
      }
   },
   credits: {
      style: {
         color: '#666'
      }
   },
   labels: {
      style: {
         color: '#707073'
      }
   },

   drilldown: {
      activeAxisLabelStyle: {
         color: '#F0F0F3'
      },
      activeDataLabelStyle: {
         color: '#F0F0F3'
      }
   },

   navigation: {
      buttonOptions: {
         symbolStroke: '#DDDDDD',
         theme: {
            fill: '#505053'
         }
      }
   },

   // scroll charts
   rangeSelector: {
      buttonTheme: {
         fill: '#505053',
         stroke: '#000000',
         style: {
            color: '#CCC'
         },
         states: {
            hover: {
               fill: '#707073',
               stroke: '#000000',
               style: {
                  color: 'white'
               }
            },
            select: {
               fill: '#000003',
               stroke: '#000000',
               style: {
                  color: 'white'
               }
            }
         }
      },
      inputBoxBorderColor: '#505053',
      inputStyle: {
         backgroundColor: '#333',
         color: 'silver'
      },
      labelStyle: {
         color: 'silver'
      }
   },

   navigator: {
      handles: {
         backgroundColor: '#666',
         borderColor: '#AAA'
      },
      outlineColor: '#CCC',
      maskFill: 'rgba(255,255,255,0.1)',
      series: {
         color: '#7798BF',
         lineColor: '#A6C7ED'
      },
      xAxis: {
         gridLineColor: '#505053'
      }
   },

   scrollbar: {
      barBackgroundColor: '#808083',
      barBorderColor: '#808083',
      buttonArrowColor: '#CCC',
      buttonBackgroundColor: '#606063',
      buttonBorderColor: '#606063',
      rifleColor: '#FFF',
      trackBackgroundColor: '#404043',
      trackBorderColor: '#404043'
   },

   // special colors for some of the
   legendBackgroundColor: 'rgba(0, 0, 0, 0.5)',
   background2: '#505053',
   dataLabelsColor: '#B0B0B3',
   textColor: '#C0C0C0',
   contrastTextColor: '#F0F0F3',
   maskColor: 'rgba(255,255,255,0.3)'
};

// Apply the theme
Highcharts.setOptions(Highcharts.theme);

$(function () {

    var charts;

    $(document).ready(function () {
        Highcharts.setOptions({
            global: {
                useUTC: false
            }
        });

          var num;


          function callAjax() {
            $.ajax({
                          type: 'GET',
                          url: '/datos_velocidadviento2',
                          data: $(this).serialize(),
                          dataType: 'json',
                          success: function (data) {
                                 num = data;
                          }
                  });
            return num;
          }
          

       charts = $('#container-velocidadviento-grande').highcharts({
            chart: {
                type: document.getElementById('tipoGrafica-velocidadviento').value,
                animation: Highcharts.svg, // don't animate in old IE
                marginRight: 10,

                events: {
                    load: function () {

                        // set up the updating of the chart each second
                        var series = this.series[0];
                        setInterval(function () {
                            var x = (new Date()).getTime(), // current time            
                                y = callAjax();
                            series.addPoint([x, y], true, true);
                        }, 1000);
                        
                    }
                },                
            },
            title: {
                text: 'Velocidad del viento'
            },
            xAxis: {
                type: 'datetime',
                text: 'Datetime',
                tickPixelInterval: 150
            },
            yAxis: {
                title: {
                    text: 'km / h'
                },
                plotLines: [{
                    value: 0,
                    width: 1,
                    color: '#808080'
                }]
            },
            tooltip: {
                formatter: function () {
                    return '<b>' + this.series.name + '</b><br/>' +
                        Highcharts.dateFormat('%Y-%m-%d %H:%M:%S', this.x) + '<br/>' +
                        Highcharts.numberFormat(this.y, 2);
                }
            },
            legend: {
                enabled: false
            },
            exporting: {
                enabled: false
            },
            series: [{
                name: 'Velocidad del viento',
                data: (function () {
                    // generate an array of random data
                    var data = [],
                        time = (new Date()).getTime(),
                        i;

                    for (i = -19; i <= 0; i += 1) {
                        data.push({
                            x: time + i * 1000,
                            y: 0,
                            color: 'blue'

                        });
                    }
                    return data;
                }())
            }],
        },
        function (charts) {
            $('#botonGrafica-velocidadviento').click(function () {

                charts.series[0].update({
                    type: document.getElementById('tipoGrafica-velocidadviento').value
                });

            });
        });
        
    });
    
});

</script>
  </head>
  <body>
  <div class="container">

	  <div id="sesion_usuario">
	  	<div id="mensaje_bienvenida" class="alert alert-success">Ha iniciado sesión como: {{sesion}}</div>
	  	<input id="boton-cerrar" type="button" value="Cerrar sesión" onclick="location.href='/cerrar_sesion';" class="btn btn-warning" />
	  </div>
	  
      <div class="masthead" id="barra_navegacion">
        <h3 class="text-muted">UGR Aerospace Program</h3>
        <nav>
          <ul class="nav nav-justified">
            <li><a href="/">Inicio</a></li>
            <li class="active"><a href="/monitor">Monitorización</a></li>
            <li><a href="/estadisticas">Estadísticas</a></li>
            <li><a href="#">Streaming</a></li>
            <li><a href="/editar_perfil">Editar perfil</a></li>
            <li><a href="twitter">Social</a></li>
          </ul>
        </nav>
      </div>
      
      	<div class="panel panel-default" id="monitor-titulo">
	    	<div class="panel-body"><h1 id="monitor-texto-titulo">Monitorización</h1></div>
		</div>
		
      
	    <div id="paneles-highchart">
	    
		   	<div class="panel panel-success" id="panel-highchart-velocidadviento-grande">
		        <div class="panel-heading">Velocidad del viento</div>
				<select name="tipoGrafica-velocidadviento" id="tipoGrafica-velocidadviento" >    
				   <option value="column" selected="selected">Columnas</option>
				   <option value="spline">Lineas</option>
				   <option value="area">Area</option>
				   <option value="areaspline">Lineas con area</option>
				   <option value="scatter">Puntos</option>
				</select>
				<button id="botonGrafica-velocidadviento">Cambiar tipo</button>
				
		   		<div id="container-velocidadviento-grande"></div>
		    </div>
		    
		   
	    </div>

  	</div>
    <!-- Site footer -->
      <footer class="footer">
        <p>&copy; UGR Aerospace Program</p>
      </footer>
      
    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <script src="../../assets/js/ie10-viewport-bug-workaround.js"></script>
  </body>
</html>
